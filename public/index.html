<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mctags.dev</title>
    <link rel="icon" type="image/gif" href="img/mctags.gif">
    <link rel="stylesheet" href="css/style.css">


    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=JetBrains+Mono:wght@400;500&display=swap"
        rel="stylesheet">

    <script type="importmap">
    {
        "imports": {
            "jszip": "https://esm.sh/jszip@3.10.1",
            "cytoscape": "https://esm.sh/cytoscape@3.28.1",
            "cytoscape-fcose": "https://esm.sh/cytoscape-fcose@2.2.0",
            "cytoscape-dagre": "https://esm.sh/cytoscape-dagre@2.5.0",
            "dagre": "https://esm.sh/dagre@0.8.5",
            "@katana-project/zip": "https://esm.sh/@katana-project/zip@0.7.1"
        }
    }
    </script>
</head>

<body>

    <div id="disclaimer-modal" class="overlay hidden"
        style="background: rgba(24, 24, 27, 0.4); backdrop-filter: blur(2px);">
        <div class="card disclaimer-card">
            <div class="disclaimer-header-row"
                style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 1rem;">
                <div style="display: flex; align-items: center; gap: 0.75rem;">
                    <img src="img/mctags.gif" alt="mctags logo" style="width: 32px; height: 32px;">
                    <h2 class="disclaimer-title">mctags.dev</h2>
                </div>
                <button class="about-close-btn" id="disclaimer-close-btn">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">
                        <path
                            d="M3.72 3.72a.75.75 0 0 1 1.06 0L8 6.94l3.22-3.22a.749.749 0 0 1 1.275.326.749.749 0 0 1-.215.734L9.06 8l3.22 3.22a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L8 9.06l-3.22 3.22a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042L6.94 8 3.72 4.78a.75.75 0 0 1 0-1.06Z">
                        </path>
                    </svg>
                </button>
            </div>
            <div class="disclaimer-body">
                <p>This is a tag visualization tool that downloads Minecraft JARs directly from Mojang. By proceeding
                    you acknowledge the Minecraft <a href="https://www.minecraft.net/eula" target="_blank"
                        class="text-link">EULA</a>.</p>
            </div>
        </div>
    </div>

    <div id="loading-modal" class="overlay hidden"
        style="background: rgba(24, 24, 27, 0.4); backdrop-filter: blur(2px);">
        <div class="card" style="background: transparent; box-shadow: none;">
            <div id="status-container">
                <p id="progress-text"
                    style="text-align: center; margin-bottom: 0.5rem; color: var(--text-primary); font-weight: 500;">
                    Initializing...</p>
                <div class="progress-bar-bg"
                    style="width: 200px; margin: 0 auto; height: 4px; background: var(--border);">
                    <div id="progress-bar" class="progress-bar-fill" style="background: var(--text-primary);"></div>
                </div>
            </div>
        </div>
    </div>

    <div id="settings-modal" class="overlay hidden"
        style="background: rgba(24, 24, 27, 0.4); backdrop-filter: blur(2px);">
        <div class="card settings-card">
            <div class="settings-header-row"
                style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                <h2 class="settings-title" style="margin: 0; font-size: 1.1rem;">Settings</h2>
                <button class="about-close-btn" id="settings-close-btn">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">
                        <path
                            d="M3.72 3.72a.75.75 0 0 1 1.06 0L8 6.94l3.22-3.22a.749.749 0 0 1 1.275.326.749.749 0 0 1-.215.734L9.06 8l3.22 3.22a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L8 9.06l-3.22 3.22a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042L6.94 8 3.72 4.78a.75.75 0 0 1 0-1.06Z">
                        </path>
                    </svg>
                </button>
            </div>
            <div class="settings-body" style="text-align: left;">
                <div class="setting-item" style="margin-bottom: 1.5rem;">
                    <label for="grid-spacing"
                        style="display: block; margin-bottom: 0.5rem; font-size: 0.875rem; color: var(--text-secondary);">Grid
                        Spacing Multiplier</label>
                    <div style="display: flex; gap: 1rem; align-items: center;">
                        <input type="range" id="grid-spacing" min="0.5" max="3.0" step="0.1" value="1.0"
                            style="flex: 1; accent-color: var(--text-primary);">
                        <span id="grid-spacing-value"
                            style="font-family: var(--font-mono); font-size: 0.875rem; width: 3ch;">1.0</span>
                    </div>
                </div>
                <div style="display: flex; gap: 0.5rem; justify-content: flex-end;">
                    <button id="settings-reset-btn" style="width: auto; padding: 0.5rem 1rem;">Reset to Default</button>
                    <button id="settings-save-btn"
                        style="width: auto; padding: 0.5rem 1rem; background: var(--text-primary); color: #18181b;">Save</button>
                </div>
            </div>
        </div>
    </div>

    <div id="about-modal" class="overlay hidden" style="background: rgba(24, 24, 27, 0.4); backdrop-filter: blur(2px);">
        <div class="card about-card">
            <div class="about-header-row">
                <div style="display: flex; align-items: center; gap: 0.75rem;">
                    <img src="img/mctags.gif" alt="mctags logo" style="width: 32px; height: 32px;">
                    <h2 class="about-title">About mctags.dev</h2>
                </div>
                <button class="about-close-btn" id="about-close-btn">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">
                        <path
                            d="M3.72 3.72a.75.75 0 0 1 1.06 0L8 6.94l3.22-3.22a.749.749 0 0 1 1.275.326.749.749 0 0 1-.215.734L9.06 8l3.22 3.22a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L8 9.06l-3.22 3.22a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042L6.94 8 3.72 4.78a.75.75 0 0 1 0-1.06Z">
                        </path>
                    </svg>
                </button>
            </div>
            <div class="about-body">
                <p>mctags.dev is designed to visualize <a href="https://minecraft.wiki/w/Tag_(Java_Edition)"
                        target="_blank" class="text-link">Minecraft tag</a> relationships using <a
                        href="https://js.cytoscape.org/" target="_blank" class="text-link">Cytoscape.js</a>. It runs
                    entirely in your browser.</p>



                <div class="about-key">
                    <div class="about-header-row">
                        <h2 class="about-title">Key</h2>
                    </div>
                    <ul class="key-list">
                        <li>
                            <div class="key-label-wrapper">
                                <div class="key-marker tag"></div>
                                <strong>Tag</strong>
                            </div>
                            <span>A collection of entries</span>
                        </li>
                        <li>
                            <div class="key-label-wrapper">
                                <div class="key-marker entry"></div>
                                <strong>Entry</strong>
                            </div>
                            <span>A specific element (item, block, etc)</span>
                        </li>
                        <li>
                            <div class="key-label-wrapper">
                                <div class="key-marker focused"></div>
                                <strong>Central Entry</strong>
                            </div>
                            <span>The center of the relationship graph</span>
                        </li>
                    </ul>
                </div>

                <div class="about-shortcuts">
                    <div class="about-header-row">
                        <h2 class="about-title">Keyboard Shortcuts</h2>
                    </div>
                    <ul>
                        <li>
                            <div class="about-shortcuts-keys">
                                <kbd class="kbd-modifier">Option</kbd> + <kbd>1</kbd> - <kbd>0</kbd>
                            </div>
                            <span>Switch Tabs</span>
                        </li>
                        <li>
                            <div class="about-shortcuts-keys">
                                <kbd class="kbd-modifier">Option</kbd> + <kbd>F</kbd>
                            </div>
                            <span>Focus Search</span>
                        </li>
                        <li>
                            <div class="about-shortcuts-keys">
                                <kbd class="kbd-modifier">Option</kbd> + <kbd>W</kbd>
                            </div>
                            <span>Close Tab</span>
                        </li>

                        <li>
                            <div class="about-shortcuts-keys">
                                <kbd class="kbd-modifier">Option</kbd> + <kbd>E</kbd>
                            </div>
                            <span>Toggle Sidebar</span>
                        </li>
                        <li>
                            <div class="about-shortcuts-keys">
                                <kbd class="kbd-modifier">Option</kbd> + <kbd>R</kbd>
                            </div>
                            <span>Reset View</span>
                        </li>
                        <li>
                            <div class="about-shortcuts-keys">
                                <kbd>Esc</kbd>
                            </div>
                            <span>Close Modals</span>
                        </li>
                    </ul>
                </div>

                <div class="about-footer">
                    <a href="https://github.com/phizlip/mctags" target="_blank" class="github-link">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16">
                            <path
                                d="M6.766 11.695C4.703 11.437 3.25 9.904 3.25 7.92c0-.806.281-1.677.75-2.258-.203-.532-.172-1.662.062-2.129.626-.081 1.469.258 1.969.726.594-.194 1.219-.291 1.985-.291.765 0 1.39.097 1.953.274.484-.451 1.343-.79 1.969-.709.218.435.25 1.564.046 2.113.5.613.766 1.436.766 2.274 0 1.984-1.453 3.485-3.547 3.759.531.355.891 1.129.891 2.016v1.678c0 .484.39.758.859.564C13.781 14.824 16 11.905 16 8.291 16 3.726 12.406 0 7.984 0 3.562 0 0 3.726 0 8.291c0 3.581 2.203 6.55 5.172 7.663A.595.595 0 0 0 6 15.389v-1.291c-.219.097-.5.162-.75.162-1.031 0-1.641-.581-2.078-1.662-.172-.435-.36-.693-.719-.742-.187-.016-.25-.097-.25-.193 0-.194.313-.339.625-.339.453 0 .844.29 1.25.887.313.468.641.678 1.031.678.391 0 .641-.146 1-.516.266-.275.469-.517.657-.678Z">
                            </path>
                        </svg>
                        GitHub
                    </a>
                    <p class="text-sm text-muted">Inspired by <a href="https://mcsrc.dev" target="_blank"
                            class="text-link">mcsrc.dev</a></p>
                </div>
            </div>
        </div>
    </div>

    <header class="top-bar">
        <div style="display: flex; align-items: center; gap: 0.5rem;">
            <button id="sidebar-toggle-btn" class="icon-btn" title="Toggle Sidebar"
                style="margin-right: 0.5rem; width: 28px; height: 28px;">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">
                    <path
                        d="m4.177 7.823 2.396-2.396A.25.25 0 0 1 7 5.604v4.792a.25.25 0 0 1-.427.177L4.177 8.177a.25.25 0 0 1 0-.354" />
                    <path
                        d="M0 1.75C0 .784.784 0 1.75 0h12.5C15.216 0 16 .784 16 1.75v12.5A1.75 1.75 0 0 1 14.25 16H1.75A1.75 1.75 0 0 1 0 14.25Zm1.75-.25a.25.25 0 0 0-.25.25v12.5c0 .138.112.25.25.25H9.5v-13Zm12.5 13a.25.25 0 0 0 .25-.25V1.75a.25.25 0 0 0-.25-.25H11v13Z" />
                </svg>
            </button>
            <div class="version-controls">
                <select id="type-select" class="version-select">
                    <option value="all" selected>All Types</option>
                    <option value="release">Releases</option>
                    <option value="snapshot">Snapshots</option>
                </select>
                <select id="version-select" class="version-select">
                    <option>Loading...</option>
                </select>
            </div>
            <div class="navbar-icons">
                <button id="refresh-btn" class="icon-btn" title="Reset View">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">
                        <path
                            d="M1.705 8.005a.75.75 0 0 1 .834.656 5.5 5.5 0 0 0 9.592 2.97l-1.204-1.204a.25.25 0 0 1 .177-.427h3.646a.25.25 0 0 1 .25.25v3.646a.25.25 0 0 1-.427.177l-1.38-1.38A7.002 7.002 0 0 1 1.05 8.84a.75.75 0 0 1 .656-.834ZM8 2.5a5.487 5.487 0 0 0-4.131 1.869l1.204 1.204A.25.25 0 0 1 4.896 6H1.25A.25.25 0 0 1 1 5.75V2.104a.25.25 0 0 1 .427-.177l1.38 1.38A7.002 7.002 0 0 1 14.95 7.16a.75.75 0 0 1-1.49.178A5.5 5.5 0 0 0 8 2.5Z" />
                    </svg>
                </button>
                <button id="settings-btn" class="icon-btn" title="Settings">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16">
                        <path
                            d="M8 0a8.2 8.2 0 0 1 .701.031C9.444.095 9.99.645 10.16 1.29l.288 1.107c.018.066.079.158.212.224.231.114.454.243.668.386.123.082.233.09.299.071l1.103-.303c.644-.176 1.392.021 1.82.63.27.385.506.792.704 1.218.315.675.111 1.422-.364 1.891l-.814.806c-.049.048-.098.147-.088.294.016.257.016.515 0 .772-.01.147.038.246.088.294l.814.806c.475.469.679 1.216.364 1.891a7.977 7.977 0 0 1-.704 1.217c-.428.61-1.176.807-1.82.63l-1.102-.302c-.067-.019-.177-.011-.3.071a5.909 5.909 0 0 1-.668.386c-.133.066-.194.158-.211.224l-.29 1.106c-.168.646-.715 1.196-1.458 1.26a8.006 8.006 0 0 1-1.402 0c-.743-.064-1.289-.614-1.458-1.26l-.289-1.106c-.018-.066-.079-.158-.212-.224a5.738 5.738 0 0 1-.668-.386c-.123-.082-.233-.09-.299-.071l-1.103.303c-.644.176-1.392-.021-1.82-.63a8.12 8.12 0 0 1-.704-1.218c-.315-.675-.111-1.422.363-1.891l.815-.806c.05-.048.098-.147.088-.294a6.214 6.214 0 0 1 0-.772c.01-.147-.038-.246-.088-.294l-.815-.806C.635 6.045.431 5.298.746 4.623a7.92 7.92 0 0 1 .704-1.217c.428-.61 1.176-.807 1.82-.63l1.102.302c.067.019.177.011.3-.071.214-.143.437-.272.668-.386.133-.066.194-.158.211-.224l.29-1.106C6.009.645 6.556.095 7.299.03 7.53.01 7.764 0 8 0Zm-.571 1.525c-.036.003-.108.036-.137.146l-.289 1.105c-.147.561-.549.967-.998 1.189-.173.086-.34.183-.5.29-.417.278-.97.423-1.529.27l-1.103-.303c-.109-.03-.175.016-.195.045-.22.312-.412.644-.573.99-.014.031-.021.11.059.19l.815.806c.411.406.562.957.53 1.456a4.709 4.709 0 0 0 0 .582c.032.499-.119 1.05-.53 1.456l-.815.806c-.081.08-.073.159-.059.19.162.346.353.677.573.989.02.03.085.076.195.046l1.102-.303c.56-.153 1.113-.008 1.53.27.161.107.328.204.501.29.447.222.85.629.997 1.189l.289 1.105c.029.109.101.143.137.146a6.6 6.6 0 0 0 1.142 0c.036-.003.108-.036.137-.146l.289-1.105c.147-.561.549-.967.998-1.189.173-.086.34-.183.5-.29.417-.278.97-.423 1.529-.27l1.103.303c.109.029.175-.016.195-.045.22-.313.411-.644.573-.99.014-.031.021-.11-.059-.19l-.815-.806c-.411-.406-.562-.957-.53-1.456a4.709 4.709 0 0 0 0-.582c-.032-.499.119-1.05.53-1.456l.815-.806c.081-.08.073-.159.059-.19a6.464 6.464 0 0 0-.573-.989c-.02-.03-.085-.076-.195-.046l-1.102.303c-.56.153-1.113.008-1.53-.27a4.44 4.44 0 0 0-.501-.29c-.447-.222-.85-.629-.997-1.189l-.289-1.105c-.029-.11-.101-.143-.137-.146a6.6 6.6 0 0 0-1.142 0ZM11 8a3 3 0 1 1-6 0 3 3 0 0 1 6 0ZM9.5 8a1.5 1.5 0 1 0-3.001.001A1.5 1.5 0 0 0 9.5 8Z">
                        </path>
                    </svg>
                </button>
                <button id="info-btn" class="icon-btn" title="About">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">
                        <path
                            d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z" />
                    </svg>
                </button>
            </div>
    </header>

    <div id="app" class="app-container">
        <aside class="sidebar" id="sidebar" style="width: 360px;">
            <div class="search-box">
                <input type="text" id="tree-search" placeholder="Search tags or resources...">
                <button id="search-clear-btn" class="search-clear-btn hidden" title="Clear Search">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">
                        <path
                            d="M3.72 3.72a.75.75 0 0 1 1.06 0L8 6.94l3.22-3.22a.749.749 0 0 1 1.275.326.749.749 0 0 1-.215.734L9.06 8l3.22 3.22a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L8 9.06l-3.22 3.22a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042L6.94 8 3.72 4.78a.75.75 0 0 1 0-1.06Z">
                        </path>
                    </svg>
                </button>
            </div>

            <div id="tree-view" class="tree-view"></div>

            <div id="details-resizer" class="details-resizer"></div>

            <div id="details-panel" class="details hidden">
                <h3 id="detail-title">Select a node</h3>

                <div class="detail-tabs">
                    <button id="tab-relations" class="detail-tab active">Relations</button>
                    <button id="tab-json" class="detail-tab">JSON</button>
                </div>

                <div id="detail-view-relations">
                    <div class="detail-section">
                        <h4>Contains (<span id="detail-child-count">0</span>)</h4>
                        <ul id="detail-children" class="detail-list"></ul>
                    </div>
                    <div class="detail-section">
                        <h4>Part of (<span id="detail-parent-count">0</span>)</h4>
                        <ul id="detail-parents" class="detail-list"></ul>
                    </div>
                </div>

                <div id="detail-view-json" class="hidden">
                    <div class="json-container">
                        <pre><code id="json-content"></code></pre>
                    </div>
                </div>
            </div>
        </aside>

        <div id="resizer" class="resizer"></div>

        <div class="main-content">
            <div id="tabs-bar" class="tabs-bar">
                <!-- Tabs will be injected here -->
            </div>
            <div id="breadcrumbs-bar" class="breadcrumbs-bar"></div>
            <main id="cy" class="graph-container"></main>
        </div>
    </div>

    <script type="module" src="js/app.js"></script>
</body>

</html>